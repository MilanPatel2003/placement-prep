<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Traffic</title>
    <style>
      body {
        display: flex;
        align-items: center;
        justify-content: center;
        height: 100vh;
      }

      table {
        width: 600px;
        height: 600px;
        border-collapse: collapse;
      }

      td {
        border: 2px solid black;
        width: 150px;
        height: 150px;
      }

      body
        > table:nth-child(1)
        > tbody:nth-child(1)
        > tr:nth-child(1)
        > td:nth-child(2) {
        border-bottom: none;
      }
      body
        > table:nth-child(1)
        > tbody:nth-child(1)
        > tr:nth-child(2)
        > td:nth-child(2) {
        border: none;
      }

      body
        > table:nth-child(1)
        > tbody:nth-child(1)
        > tr:nth-child(2)
        > td:nth-child(1) {
        border-right: none;
      }

      body
        > table:nth-child(1)
        > tbody:nth-child(1)
        > tr:nth-child(2)
        > td:nth-child(3) {
        border-left: none;
      }
      body
        > table:nth-child(1)
        > tbody:nth-child(1)
        > tr:nth-child(3)
        > td:nth-child(2) {
        border-top: none;
      }

      #t1 {
        width: 150px;
        height: 100px;
      }

      .btn {
        height: 37px;
        width: 61px;
        border-radius: 35px;
      }
      .red {
        background-color: red;
        /* opacity: 0.4; */
      }
      .green {
        background-color: green;
        opacity: 0.4;
      }
      .yellow {
        background-color: yellow;
        opacity: 0.4;
      }
    </style>
  </head>
  <body>
    <!-- <button id="start">START</button> -->
    <table>
      <tr>
        <td></td>
        <!-- NORTH -->

        <td style="vertical-align: bottom" id="north">
          <button class="btn green" id="ng"></button>
          <button class="btn yellow" id="ny"></button>
          <button class="btn red" id="nr"></button>
        </td>
        <td></td>
      </tr>

      <tr>
        <!-- WEST -->
        <td align="right" valign="center" id="west">
          <button class="btn green" id="wg"></button><br /><br />
          <button class="btn yellow" id="wy"></button><br /><br />
          <button class="btn red" id="wr"></button>
        </td>

        <td></td>

        <!-- EAST -->
        <td align="left" valign="center" id="east">
          <button class="btn green" id="eg"></button><br /><br />
          <button class="btn yellow" id="ey"></button><br /><br />
          <button class="btn red" id="er"></button>
        </td>
      </tr>

      <tr>
        <td></td>
        <!-- SOUTH -->
        <td style="vertical-align: top" id="south">
          <button class="btn green" id="sg"></button>
          <button class="btn yellow" id="sy"></button>
          <button class="btn red" id="sr"></button>
        </td>
        <td></td>
      </tr>
    </table>
    <button id="start" class="btn">START</button>
  </body>
  <script>
    const directions = ["north", "east", "south", "west"];
    let timer;
    const signals = {
      north: {
        green: document.getElementById("ng"),
        yellow: document.getElementById("ny"),
        red: document.getElementById("nr"),
      },
      west: {
        green: document.getElementById("wg"),
        yellow: document.getElementById("wy"),
        red: document.getElementById("wr"),
      },
      east: {
        green: document.getElementById("eg"),
        yellow: document.getElementById("ey"),
        red: document.getElementById("er"),
      },
      south: {
        green: document.getElementById("sg"),
        yellow: document.getElementById("sy"),
        red: document.getElementById("sr"),
      },
    };

    function triggerSignal(dir, timeLeft) {
      timer = setInterval(() => {
        timeLeft--;

        // signals[dir].green.style.opacity = 1;
        if (timeLeft > 5) {
          signals[dir].green.style.opacity = 1;
          signals[dir].red.style.opacity = 0.4;
        }
        if (timeLeft < 5 && timeLeft > 0) {
          signals[dir].yellow.style.opacity = 1;
          signals[dir].green.style.opacity = 0.4;
          signals[dir].red.style.opacity = 0.4;
        }
        if (timeLeft == 0) {
          signals[dir].yellow.style.opacity = 0.4;
          signals[dir].red.style.opacity = 1;
        }
      }, 1000);
      clearInterval();
    }

    function startSignal() {
      let timeLeft;

      triggerSignal(0, 10);
      timeLeft = 10;

      setTimeout(() => {
        console.log("10 seconds done");
        triggerSignal("east", 10);
      }, 10000);
      timeLeft = 10;

      setTimeout(() => {
        console.log("20 seconds done");
        triggerSignal("south", 10);
      }, 20000);

      timeLeft = 10;
      setTimeout(() => {
        console.log("30 seconds done");
        triggerSignal("west", 10);
      }, 30000);
    }

    const startButton = document.getElementById("start");

    startButton.onclick = function () {
      startSignal();
    };
    // startSignal()
    // triggerSignal("north");

  </script>
</html>
